假设
.map(new RichMapFunction(){
...})

RichMapFunction首先会在client实例化一次.
然后flink会将map对象序列化分发出去.

ClosureCleaner 检查函数闭包可序列化

https://flink.apache.org/visualizer/

https://github.com/bethunebtj/flink_tutorial/blob/master/%E8%BF%BD%E6%BA%90%E7%B4%A2%E9%AA%A5%EF%BC%9A%E9%80%8F%E8%BF%87%E6%BA%90%E7%A0%81%E7%9C%8B%E6%87%82Flink%E6%A0%B8%E5%BF%83%E6%A1%86%E6%9E%B6%E7%9A%84%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B.md

org.apache.flink.runtime.taskexecutor.TaskExecutor#submitTask
的时候创造了 Task